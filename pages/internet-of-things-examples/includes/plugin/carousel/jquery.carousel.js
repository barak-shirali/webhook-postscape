/*
 * jQuery Carousel Plugin v1.0
 * http://richardscarrott.co.uk/posts/view/jquery-carousel-plugin
 * Copyright (c) 2010 Richard Scarrott
 * Dual licensed under the MIT and GPL licenses:
*/
if(typeof Object.create!=="function"){Object.create=function(a){function b(){}b.prototype=a;return new b}}(function(a){var b=a.browser.msie&&a.browser.version.substr(0,1)<9;var c={settings:{itemsPerPage:1,itemsPerTransition:1,noOfRows:1,pagination:true,nextPrevLinks:true,speed:"normal",easing:"swing"},init:function(b,c){if(!b.length){return false}this.options=a.extend({},this.settings,c);this.itemIndex=0;this.container=b;this.runner=this.container.find("ul");this.items=this.runner.children("li");this.noOfItems=this.items.length;this.setRunnerWidth();if(this.noOfItems<=this.options.itemsPerPage){return false}this.insertMask();this.noOfPages=Math.ceil((this.noOfItems-this.options.itemsPerPage)/this.options.itemsPerTransition)+1;if(this.options.pagination){this.insertPagination()}if(this.options.nextPrevLinks){this.insertNextPrevLinks()}this.updateBtnStyles()},insertMask:function(){this.runner.wrap('<div class="mask" />');this.mask=this.container.find("div.mask");var a=this.runner.outerHeight(true);this.mask=this.container.find("div.mask");this.mask.height(a)},setRunnerWidth:function(){this.noOfItems=Math.round(this.noOfItems/this.options.noOfRows);var a=this.items.outerWidth(true)*this.noOfItems;this.runner.width(a)},insertPagination:function(){var b,c=[];this.paginationLinks=a('<ol class="pagination-links" />');for(b=0;b<this.noOfPages;b++){c[b]='<li><a href="#item-'+b+'">'+(b+1)+"</a></li>"}this.paginationLinks.append(c.join("")).appendTo(this.container).find("a").bind("click.carousel",a.proxy(this,"paginationHandler"))},paginationHandler:function(a){this.itemIndex=a.target.hash.substr(1).split("-")[1]*this.options.itemsPerTransition;this.animate();return false},insertNextPrevLinks:function(){this.prevLink=a('<a href="#" class="prev">Prev</a>').bind("click.carousel",a.proxy(this,"prevItem")).appendTo(this.container);this.nextLink=a('<a href="#" class="next">Next</a>').bind("click.carousel",a.proxy(this,"nextItem")).appendTo(this.container)},nextItem:function(){this.itemIndex=this.itemIndex+this.options.itemsPerTransition;this.animate();return false},prevItem:function(){this.itemIndex=this.itemIndex-this.options.itemsPerTransition;this.animate();return false},updateBtnStyles:function(){if(this.options.pagination){this.paginationLinks.children("li").removeClass("current").eq(Math.ceil(this.itemIndex/this.options.itemsPerTransition)).addClass("current")}if(this.options.nextPrevLinks){this.nextLink.add(this.prevLink).removeClass("disabled");if(this.itemIndex===this.noOfItems-this.options.itemsPerPage){this.nextLink.addClass("disabled")}else if(this.itemIndex===0){this.prevLink.addClass("disabled")}}},animate:function(){var a,c;if(this.itemIndex>this.noOfItems-this.options.itemsPerPage){this.itemIndex=this.noOfItems-this.options.itemsPerPage}if(this.itemIndex<0){this.itemIndex=0}a=this.items.eq(this.itemIndex);c=a.position();if(b){this.runner.stop().animate({left:-c.left},this.options.speed,this.options.easing)}else{this.mask.stop().animate({scrollLeft:c.left},this.options.speed,this.options.easing)}this.updateBtnStyles()}};a.fn.carousel=function(b){return this.each(function(){var d=Object.create(c);d.init(a(this),b);a.data(this,"carousel",d)})}})(jQuery);